---
layout: post
title:  "Golang GC"
date:   2023-08-04 15:40:56
categories: jekyll update
---

### 一、概念

#### GC

   当程序向操作系统申请的内存不再需要时，垃圾回收主动将其回收并供其他代码进行内存申请时候复用，  
或者将其归还给操作系统，这种针对内存级别资源的自动回收过程，即为垃圾回收

![GitHub set up](https://thumbnail0.baidupcs.com/thumbnail/fc4a065a0sa19fcd41f2830e372c33d8?fid=927473455-250528-476922322076347&time=1691470800&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-u5D5w5xfIq1K6ftz%2FJNjIMsaCvg%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=480940886027894177&dp-callid=0&file_type=0&size=c710_u400&quality=100&vuk=-&ft=video "图片Title")


### 二、常见回收算法

**1.引用计数**    
 &emsp;代表语言：
 **php、Python**    
 &emsp;优点: 
 实现简单、 即时回收、 内存利用率高、不暂停程序      
 &emsp;缺点: 
 循环引用无法回收、成本较高，需要维护计数器变量、无法保证响应时间 


**2.追踪式**    
   &ensp; __标记复制__  
    &emsp; 将内存分为相同两块，一块内存使用完之后把对象复制到另一块内存，恢复第一块内存
	&emsp;优点：解决内存碎片化，防止分配较大连续内存空间的GC问题
	&emsp;缺点：内存利用率低

   &ensp; __标记清除__   
	&emsp;优点：空间利用率高，不需要额外空间复制对象，也不需要给每个对象设置引用计数器
	&emsp;缺点：可能产生大量碎片，导致下一次GC提前

   &ensp; __标记整理__  
    &emsp;分代式：根据存活时间分为年轻代，老年代，永久代；如果一个对象存活时间不长则倾向于被回收


### 三、GO GC 三色标记清扫算法
&ensp;**标记阶段：** 从根对象出发查找并标记堆中所有存活的对象；    
&ensp;**清除阶段：** 遍历堆中的全部对象，回收未被标记的垃圾对象并将回收的内存加入空闲链表

